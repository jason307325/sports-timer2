<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é¸æ‰‹åˆ†æ®µç§’å·®è¨ˆç®—å™¨</title>

<style>
body{
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    background:#f5f5f7;
    padding:20px;
}
.container{
    max-width:620px;
    margin:auto;
    background:#fff;
    padding:20px;
    border-radius:14px;
    box-shadow:0 4px 8px rgba(0,0,0,.1);
}
h2{text-align:center}

.time-box{
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:32px;
    margin:15px 0;
}
.time{
    width:80px;
    text-align:center;
    border:2px solid #ccc;
    border-radius:8px;
    padding:6px;
}
.sep{margin:0 6px;font-weight:bold}

.keypad{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
    margin:15px 0;
}
.keypad button{
    font-size:26px;
    padding:18px 0;
    border:none;
    border-radius:12px;
    background:#eef3ff;
}
.keypad .action{background:#0071e3;color:#fff}
.keypad .delete{background:#d70015;color:#fff}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
}
th,td{
    padding:10px;
    text-align:center;
    border-bottom:1px solid #eee;
}
th{background:#fafafa;color:#888}

.diff-plus{color:#d70015}
.diff-minus{color:#008026}
</style>
</head>

<body>
<div class="container">

<h2>ğŸŠ é¸æ‰‹åˆ†æ®µç§’å·®è¨ˆç®—å™¨</h2>

<!-- å›ºå®šæ™‚é–“è¼¸å…¥ -->
<div class="time-box">
    <div id="min" class="time">00</div>
    <span class="sep">:</span>
    <div id="sec" class="time">00</div>
    <span class="sep">.</span>
    <div id="ms" class="time">00</div>
</div>

<!-- åäºŒå®®æ ¼ -->
<div class="keypad">
    <button onclick="inputNum(1)">1</button>
    <button onclick="inputNum(2)">2</button>
    <button onclick="inputNum(3)">3</button>
    <button onclick="inputNum(4)">4</button>
    <button onclick="inputNum(5)">5</button>
    <button onclick="inputNum(6)">6</button>
    <button onclick="inputNum(7)">7</button>
    <button onclick="inputNum(8)">8</button>
    <button onclick="inputNum(9)">9</button>
    <button class="delete" onclick="backspace()">âŒ«</button>
    <button onclick="inputNum(0)">0</button>
    <button class="action" onclick="addRecord()">âœ“</button>
</div>

<table>
<thead>
<tr>
    <th>æ®µæ¬¡</th>
    <th>ç¸½æ™‚é–“</th>
    <th>åˆ†æ®µç§’æ•¸</th>
    <th>ç§’å·®</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

</div>

<script>
const fields=["min","sec","ms"];
let current=0;
let records=[];

function field(){return document.getElementById(fields[current]);}

function inputNum(n){
    let f=field();
    if(f.textContent==="00") f.textContent="";
    if(f.textContent.length<2){
        f.textContent+=n;
        if(f.textContent.length===2 && current<2) current++;
    }
    highlight();
}

function backspace(){
    let f=field();
    if(f.textContent.length>0){
        f.textContent=f.textContent.slice(0,-1);
    }else if(current>0){
        current--; backspace();
    }
    highlight();
}

function clearTime(){
    fields.forEach(id=>document.getElementById(id).textContent="00");
    current=0;
    highlight();
}

function timeToSec(){
    return parseInt(min.textContent)*60
        + parseInt(sec.textContent)
        + parseInt(ms.textContent)/100;
}

function secToTime(sec){
    let m=Math.floor(sec/60);
    let s=(sec%60).toFixed(2);
    return `${m.toString().padStart(2,"0")}:${s.padStart(5,"0")}`;
}

function addRecord(){
    if(records.length>=30) return;
    let total=timeToSec();
    if(total===0) return;

    let split=total;
    if(records.length>0)
        split=total-records.at(-1).total;

    records.push({total,split});
    updateTable();
    clearTime();
}

function updateTable(){
    tbody.innerHTML="";
    records.forEach((r,i)=>{
        let diff="-",cls="";
        if(i>0){
            let d=r.split-records[i-1].split;
            diff=(d>0?"+":"")+d.toFixed(2)+"s";
            cls=d>0?"diff-plus":"diff-minus";
        }
        tbody.innerHTML+=`
        <tr>
            <td>${i+1}</td>
            <td>${secToTime(r.total)}</td>
            <td>${secToTime(r.split)}</td>
            <td class="${cls}">${diff}</td>
        </tr>`;
    });
}

function highlight(){
    fields.forEach(id=>document.getElementById(id).style.borderColor="#ccc");
    field().style.borderColor="#0071e3";
}
highlight();
</script>

</body>
</html>
