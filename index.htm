<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>é¸æ‰‹åˆ†æ®µç§’å·®è¨ˆç®—å™¨ 2026</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0071e3">

<style>
:root{
    --blue:#0071e3;
    --orange:#ff9500;
    --gray:#8e8e93;
    --bg:#f2f2f7;
}
html,body{
    margin:0;height:100%;background:var(--bg);
    touch-action:manipulation;user-select:none;
}
body{display:flex;justify-content:center;font-family:-apple-system}
.container{
    width:100%;max-width:500px;height:100svh;
    background:#fff;display:flex;flex-direction:column;
    padding:8px 12px;box-sizing:border-box;
}
header{text-align:center}
h2{margin:4px 0;font-size:18px}
.status-badge{
    font-size:12px;padding:4px 8px;border-radius:4px;
    background:var(--gray);color:#fff;display:inline-block;
}
.status-badge.edit{background:var(--orange)}
.status-badge.run{background:var(--blue)}

.time-box{
    display:flex;justify-content:center;align-items:center;
    margin:10px 0;font-variant-numeric:tabular-nums;
}
.time{
    width:80px;height:64px;line-height:64px;
    text-align:center;font-size:40px;font-weight:bold;
    border:2px solid #ccc;border-radius:12px;
}
.sep{margin:0 6px;font-size:32px;color:#aaa}

.actions, .stopwatch{
    display:flex;gap:6px;margin-bottom:8px;
}
button{
    flex:1;padding:14px;border:none;border-radius:10px;
    font-size:18px;font-weight:bold;
}
.btn-main{background:var(--blue);color:#fff}
.btn-orange{background:var(--orange);color:#fff}
.btn-gray{background:var(--gray);color:#fff}

.table-container{
    flex:1;overflow:auto;border:1px solid #eee;border-radius:10px;
}
table{width:100%;border-collapse:collapse}
th,td{
    padding:12px 4px;text-align:center;border-bottom:1px solid #eee;
}
th{background:#f2f2f7;position:sticky;top:0}
.time-cell{color:var(--blue);font-weight:700;font-size:18px}
.split-cell{font-size:17px}
.diff-plus{color:#ff3b30;font-weight:bold}
.diff-minus{color:#34c759;font-weight:bold}

.keypad{
    display:grid;grid-template-columns:repeat(3,1fr);gap:8px;
}
.keypad button{
    font-size:24px;padding:14px;border-radius:12px;
    background:#e5e5ea;
}
.keypad .delete{background:#ff3b30;color:#fff}
.keypad .action{background:var(--blue);color:#fff}
</style>
</head>

<body>
<div class="container">
<header>
<h2>ğŸŠ åˆ†æ®µç§’å·®è¨ˆç®—å™¨ 2026</h2>
<div id="status" class="status-badge">æ–°å¢æ¨¡å¼</div>
</header>

<div class="time-box">
<div id="min" class="time">00</div><span class="sep">:</span>
<div id="sec" class="time">00</div><span class="sep">.</span>
<div id="ms" class="time">00</div>
</div>

<div class="stopwatch">
<button id="start" class="btn-main">â–¶ï¸ é–‹å§‹</button>
<button id="lap" class="btn-orange">â± åˆ†æ®µ</button>
<button id="reset" class="btn-gray">â¹ é‡ç½®</button>
</div>

<div class="table-container">
<table>
<thead>
<tr><th>æ®µ</th><th>ç¸½æ™‚é–“</th><th>åˆ†æ®µ</th><th>ç§’å·®</th></tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>

<script>
const $=id=>document.getElementById(id);
let records=[],running=false,startTime=0,raf=0;

function updateDisplay(t){
    const m=Math.floor(t/60);
    const s=Math.floor(t%60);
    const ms=Math.floor((t%1)*100);
    min.textContent=String(m).padStart(2,"0");
    sec.textContent=String(s).padStart(2,"0");
    ms.textContent=String(ms).padStart(2,"0");
}

function tick(){
    const t=(performance.now()-startTime)/1000;
    updateDisplay(t);
    raf=requestAnimationFrame(tick);
}

start.onclick=()=>{
    if(!running){
        running=true;
        startTime=performance.now()-
            ((+min.textContent)*60+(+sec.textContent)+(+ms.textContent)/100)*1000;
        tick();
        status.textContent="ç¢¼éŒ¶é€²è¡Œä¸­";
        status.className="status-badge run";
        start.textContent="â¸ æš«åœ";
    }else{
        running=false;
        cancelAnimationFrame(raf);
        start.textContent="â–¶ï¸ é–‹å§‹";
        status.textContent="æ–°å¢æ¨¡å¼";
        status.className="status-badge";
    }
};

lap.onclick=()=>{
    if(!running)return;
    const t=(performance.now()-startTime)/1000;
    records.push({total:t});
    render();
};

reset.onclick=()=>{
    running=false;
    cancelAnimationFrame(raf);
    updateDisplay(0);
    start.textContent="â–¶ï¸ é–‹å§‹";
};

function format(t){
    const m=Math.floor(t/60);
    const s=(t%60).toFixed(2).padStart(5,"0");
    return `${String(m).padStart(2,"0")}:${s}`;
}

function render(){
    records.sort((a,b)=>a.total-b.total);
    tbody.innerHTML="";
    records.forEach((r,i)=>{
        const split=i? r.total-records[i-1].total:r.total;
        let diff="-";
        if(i>1){
            diff=(split-(records[i-1].total-records[i-2].total)).toFixed(2);
        }
        tbody.innerHTML+=`
        <tr>
        <td>${i+1}</td>
        <td class="time-cell">${format(r.total)}</td>
        <td class="split-cell">${format(split)}</td>
        <td>${diff}</td>
        </tr>`;
    });
}
</script>
</div>
</body>
</html>
